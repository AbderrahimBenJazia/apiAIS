"use strict";

const countriesList = {
  //_____________________________EUROPE
  ALBANIE: 99125,
  ALLEMAGNE: 99109,
  ANDORRE: 99130,
  ARUBA: 99135,
  AUTRICHE: 99110,
  BELGIQUE: 99131,
  BIELORUSSIE: 99148,
  BOSNIEHERZEGOVINE: 99118,
  BOUVET: 99103,

  BULGARIE: 99111,
  CROATIE: 99119,
  DANEMARK: 99101,
  ESPAGNE: 99134,
  ESTONIE: 99106,
  MACEDOINENORD: 99156,
  FEROE: 99101,
  FINLANDE: 99105,
  FRANCE: 99100,
  FR: 99100,

  GIBRALTAR: 99133,
  GRECE: 99126,
  GUERNESEY: 99132,
  HONGRIE: 99112,
  IRLANDE: 99136,
  EIRE: 99136,

  ISLANDE: 99102,
  ITALIE: 99127,
  JERSEY: 99132,
  KOSOVO: 99157,
  LETTONIE: 99107,
  LIECHTENSTEIN: 99113,
  LITUANIE: 99108,
  LUXEMBOURG: 99137,
  MALTE: 99144,
  ILEMALTE: 99144,
  ILEDEMALTE: 99144,
  MAN: 99132,
  MOLDAVIE: 99151,
  MONACO: 99138,
  MONTENEGRO: 99120,
  NORVEGE: 99103,
  PAYSBAS: 99135,
  POLOGNE: 99122,
  PORTUGAL: 99139,
  REPUBLIQUEDEMOCRATIQUEALLEMANDE: 99141,
  RDA: 99141,

  REPUBLIQUEFEDERALEDALLEMAGNE: 99142,
  RFA: 99142,

  ROUMANIE: 99114,
  ROYAUMEUNI: 99132,
  ANGLETERRE: 99132,

  RUSSIE: 99123,
  SAINTMARIN: 99128,
  SERBIE: 99121,
  SLOVAQUIE: 99117,
  SLOVENIE: 99145,
  SUEDE: 99104,
  SUISSE: 99140,
  SVALBARD: 99103,
  JANMAYEN: 99103,
  TCHECOSLOVAQUIE: 99115,
  TCHEQUIE: 99116,
  TURQUIEDEUROPE: 99124,
  UKRAINE: 99155,
  VATICAN: 99129,
  SAINTSIEGE: 99129,

  //_____________________________ASIE
  AFGHANISTAN: 99212,
  ARABIESAOUDITE: 99201,
  ARMENIE: 99252,
  AZERBAIDJAN: 99253,
  BAHREIN: 99249,
  BANGLADESH: 99246,
  BHOUTAN: 99214,
  BIRMANIE: 99224,
  BRUNEI: 99225,
  CAMBODGE: 99234,
  CHINE: 99216,
  CHYPRE: 99254,
  COREE: 99237,
  REPUBLIQUECOREE: 99239,
  COREEREPUBLIQUE: 99239,
  COREESUD: 99239,

  REPUBLIQUEPOPULAIREDEMOCRATIQUECOREE: 99238,
  COREEREPUBLIQUEPOPULAIREDEMOCRATIQUE: 99238,
  COREENORD: 99238,

  EMIRATSARABESUNIS: 99247,
  ETATSMALAISNONFEDERES: 99228, //absorbé par la malaisie le 1946,
  JOHOR: 99228,
  TERENGGANU: 99228,
  KELANTAN: 99228,
  KEDAH: 99228,
  PERLIS: 99228,

  GEORGIE: 99255,
  GOA: 99223, // absorbé par l'inde en 1961,
  HONGKONG: 99230,
  INDE: 99223,
  INDONESIE: 99231,
  IRAN: 99204,
  IRAQ: 99203,
  ISRAEL: 99207,
  JAPON: 99217,
  JORDANIE: 99222,
  KAMTCHATKA: 99211,
  KAZAKHSTAN: 99256,
  KIRGHIZISTAN: 99257,
  KOWEIT: 99240,
  LAOS: 99241,
  LIBAN: 99205,
  MACAO: 99232,
  MALAISIE: 99227,
  MALDIVES: 99229,
  MANDCHOURIE: 99218,
  MONGOLIE: 99242,
  NEPAL: 99215,
  OMAN: 99250,
  OUZBEKISTAN: 99258,
  PAKISTAN: 99213,
  PALESTINE: 99261,
  PALESTINEETAT: 99261,
  ETATPALESTINE: 99261,

  PHILIPPINES: 99220,
  POSSESSIONSBRITANNIQUESAUPROCHEORIENT: 99221,
  QATAR: 99248,
  SIBERIE: 99209,
  SINGAPOUR: 99226,
  SRILANKA: 99235,
  SYRIE: 99206,
  TADJIKISTAN: 99259,
  TAIWAN: 99236,
  THAILANDE: 99219,
  TIMORORIENTAL: 99262,
  TURKESTANRUSSE: 99210,
  TURKMENISTAN: 99260,
  TURQUIE: 99208,
  VIETNAM: 99243,
  VIETNAMNORD: 99244,
  VIETNAMSUD: 99245,
  YEMEN: 99251,
  YEMENSUD: 99233, // 1967 à 1990,
  SUDYEMEN: 99233,
  REPUBLIQUEDEMOCRATIQUEPOPULAIREYEMEN: 99233,
  REPUBLIQUEDEMOCRATIQUEYEMEN: 99233,
  YEMENDEMOCRATIQUE: 99233,

  YEMENNORD: 99202, // 1962 à 1990,
  NORDYEMEN: 99202,
  REPUBLIQUEARABEYEMEN: 99202,
  YEMENREPUBLIQUEARABE: 99202,

  //_____________________________AFRIQUE
  ACORESMADERE: 99319,
  ACORES: 99319,
  MADERE: 99319,

  AFRIQUESUD: 99303,
  ALGERIE: 99352,
  ANGOLA: 99395,
  BENIN: 99327,
  BOTSWANA: 99347,
  BURKINA: 99331,
  BURKINAFASO: 99331, //ajout
  BURUNDI: 99321,
  CAMEROUN: 99322,
  CAMEROUNTOGO: 99305,
  CANARIES: 99313,
  CAPVERT: 99396,
  CENTRAFRICAINE: 99323,
  REPUBLIQUECENTRAFRICAINE: 99323,

  COMORES: 99397,
  CONGO: 99324,
  CONGOBRAZZAVILLE: 99324,
  CONGOREPUBLIQUEDEMOCRATIQUE: 99312,
  REPUBLIQUEDEMOCRATIQUECONGO: 99312,
  RDC: 99312,

  COTEIVOIRE: 99326,
  DJIBOUTI: 99399,
  EGYPTE: 99301,
  ERYTHREE: 99317,
  ESWATINI: 99391,
  ETHIOPIE: 99315,
  GABON: 99328,
  GAMBIE: 99304,
  GHANA: 99329,
  GUINEE: 99330,
  GUINEEEQUATORIALE: 99314,
  GUINEEBISSAU: 99392,
  PORTUGAISESOCEANINDIEN: 99320,
  KENYA: 99332,
  LESOTHO: 99348,
  LIBERIA: 99302,
  LIBYE: 99316,
  MADAGASCAR: 99333,
  MALAWI: 99334,
  MALI: 99335,
  MAROC: 99350,
  MAURICE: 99390,
  MAURITANIE: 99336,
  MOZAMBIQUE: 99393,
  NAMIBIE: 99311,
  NIGER: 99337,
  NIGERIA: 99338,
  OCEANINDIEN: 99308,
  OCEANINDIENTERRITOIREBRITANNIQUE: 99308,
  TERRITOIREBRITANNIQUEOCEANINDIEN: 99308,

  OUGANDA: 99339,
  PRESIDES: 99313,
  PROVINCESESPAGNOLESAFRIQUE: 99313,
  RWANDA: 99340,
  SAHARAOCCIDENTAL: 99389,
  SAINTEHELENEASCENSIONTRISTANCUNHA: 99306,
  SAINTEHELENE: 99306,
  ASCENSION: 99306,
  TRISTANCUNHA: 99306,

  SAOTOMEPRINCIPE: 99394,
  SENEGAL: 99341,
  SEYCHELLES: 99398,
  SIERRALEONE: 99342,
  SOMALIE: 99318,
  SOUDAN: 99343,
  SOUDANANGLOEGYPTIENKENYAOUGANDA: 99307,
  SOUDANANGLOEGYPTIEN: 99307,

  SOUDANSUD: 99349,
  TANGER: 99325,
  TANZANIE: 99309,
  TCHAD: 99344,
  TOGO: 99345,
  TUNISIE: 99351,
  ZAMBIE: 99346,
  ZANZIBAR: 99308,
  ZIMBABWE: 99310,

  //_____________________________AMERIQUE
  ALASKA: 99404,
  ANGUILLA: 99425,
  ANTIGUABARBUDA: 99441,
  ANTILLESNEERLANDAISES: 99431,
  ARGENTINE: 99415,
  BAHAMAS: 99436,
  BARBADE: 99434,
  BELIZE: 99429,
  BERMUDES: 99425,
  BOLIVIE: 99418,
  BONAIRESAINTEUSTACHESABA: 99443,
  BONAIRE: 99443,
  SAINTEUSTACHE: 99443,
  STEUSTACHE: 99443,
  SABA: 99443,

  BRESIL: 99416,
  CAIMANES: 99425,
  CANADA: 99401,
  CHILI: 99417,
  COLOMBIE: 99419,
  COSTARICA: 99406,
  CUBA: 99407,
  CURACAO: 99444,
  DOMINICAINE: 99408,
  REPUBLIQUEDOMINICAINE: 99408,
  DOMINICAINEREPUBLIQUE: 99408,

  DOMINIQUE: 99438,
  ELSALVADOR: 99414,
  EQUATEUR: 99420,
  ETATSUNIS: 99404,
  GEORGIESUDSANDWICHSUD: 99427,
  SANDWICHSUDGEORGIESUD: 99427,
  GEORGIESUD: 99427,
  GEORGIE: 99427,
  SANDWICHSUD: 99427,
  SANDWICH: 99427,

  GRENADE: 99435,
  GROENLAND: 99430,
  GUATEMALA: 99409,
  GUYANA: 99428,
  HAITI: 99410,
  HONDURAS: 99411,
  JAMAIQUE: 99426,
  LABRADOR: 99403,
  MALOUINESFALKLAND: 99427,
  MALOUINES: 99427,
  FALKLAND: 99427,

  MEXIQUE: 99405,
  MONTSERRAT: 99425,
  NICARAGUA: 99412,
  PANAMA: 99413,
  PARAGUAY: 99421,
  PEROU: 99422,
  PORTORICO: 99432,
  SAINTCHRISTOPHENIEVES: 99442,
  STCHRISTOPHENIEVES: 99442,

  SAINTELUCIE: 99439,
  SAINTMARTINPARTIENEERLANDAISE: 99445,
  SAINTMARTIN: 99445,

  SAINTVINCENTGRENADINES: 99440,
  STVINCENTGRENADINES: 99440,
  SAINTVINCENT: 99440,
  STVINCENT: 99440,
  GRENADINES: 99440,

  SURINAME: 99437,
  TERRITOIRESETATSUNISAMERIQUEENAMERIQUE: 99432,
  TERRETATSUNISAMERIQUEENAMERIQUE: 99432,
  TERRITOIREETATSUNISAMERIQUE: 99432,
  TERRETATSUNISAMERIQUE: 99432,
  TERRITOIREETATSUNIS: 99432,
  TERRETATSUNIS: 99432,

  TERRITOIREROYAUMEUNIDANSATLANTIQUESUD: 99427,
  TERRROYAUMEUNIDANSATLANTIQUESUD: 99427,

  TERRENEUVE: 99402,
  TERRITOIRESROYAUMEUNIAUXANTILLES: 99425,
  TERRITOIRESROYAUMEUNIANTILLES: 99425,
  TERRROYAUMEUNIAUXANTILLES: 99425,
  TERRROYAUMEUNIANTILLES: 99425,

  TRINITETOBAGO: 99433,
  TRINITE: 99433,
  TOBAGO: 99433,

  TURKSCAIQUES: 99425,
  TURKS: 99425,
  CAIQUES: 99425,

  URUGUAY: 99423,
  VENEZUELA: 99424,
  VIERGESBRITANNIQUES: 99425,
  VIERGESETATSUNIS: 99432,

  //_____________________________OCEANIE
  AUSTRALIE: 99501,
  CHRISTMAS: 99501,
  COCOSKEELING: 99501,
  COCOS: 99501,
  KEELING: 99501,

  COOK: 99502,
  FIDJI: 99508,
  GUAM: 99505,
  HAWAII: 99504,
  HEARDMACDONALD: 99501,
  HEARD: 99501,
  MACDONALD: 99501,

  KIRIBATI: 99513,
  MARIANNESNORD: 99505,
  MARSHALL: 99515,
  MICRONESIEETATSFEDERESDE: 99516,
  MICRONESIEETATSFEDERES: 99516,
  ETATSFEDERESMICRONESIE: 99516,
  MICRONESIE: 99516,

  NAURU: 99507,
  NIUE: 99502,
  NORFOLK: 99501,
  NOUVELLEZELANDE: 99502,
  PALAOS: 99517,
  PAPOUASIENOUVELLEGUINEE: 99510,
  PITCAIRN: 99503,
  SALOMON: 99512,
  SAMOAAMERICAINES: 99505,
  SAMOAOCCIDENTALES: 99506,
  TERRITOIREETATSUNISAMERIQUEENOCEANIE: 99505,
  TERRITOIREETATSUNISAMERIQUEOCEANIE: 99505,
  TERRITOIREETATSUNISOCEANIE: 99505,
  TERRDESETATSUNISAMERIQUEENOCEANIE: 99505,
  TERRDESETATSUNISAMERIQUEOCEANIE: 99505,
  TERRDESETATSUNISOCEANIE: 99505,

  TOKELAU: 99502,
  TONGA: 99509,
  TUVALU: 99511,
  VANUATU: 99514,
};

const getCountryCode = (countryName) => {
  if (!countryName || typeof countryName !== "string") {
    return { country: null, code: null };
  }

  // Normalize country name: uppercase, remove accents, remove spaces/special chars
  let normalized = countryName
    .toUpperCase()
    .normalize("NFD")
    .replace(/\p{Diacritic}/gu, "") // Remove accents
    .replace(/[^A-Z0-9]/g, ""); // Keep only letters and numbers

  // Lookup in countries list
  const code = normalized in countriesList ? countriesList[normalized] : null;

  return {
    country: code ? normalized : null,
    code,
  };
};

const checkIfCountryCodeExists = (countryCode) => {
  if (!countryCode || typeof countryCode !== "number") {
    return false;
  }

  return Object.values(countriesList).includes(countryCode);
};

module.exports = { getCountryCode, checkIfCountryCodeExists };
